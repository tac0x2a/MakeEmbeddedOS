# ボードのDipSWについて

* フラッシュ書き込み時 ``{1,2,3,4} = {ON,ON,OFF,ON}``
* 通常動作時 ``{1,2,3,4} = {ON,OFF,ON,OFF}``


# minicomについて

設定ファイル
``etc/minirc.dfl`` を ``/etc/minicom/`` へコピーする．

root じゃないと ``/dev/ttyUSB0`` を触れないので ``sudo minicom -o`` する．

設定を変更する場合は ``sudo minicom -s -o`` する．

操作は

* メニューを開く ``C-a z``
* 終了 ``C-a x``

というかんじ．


# メモ
## シリアル通信
* シリアル通信みたいなIFは信号線の周期の管理とか面倒なので，``コントローラ`` という専用チップが制御している．LANならLANコントローラ，とか．
* コントローラの制御はレジスタ経由で行う． [serial.c](/serial.c)  を参照．
* デバイスやチップごとに比較器が設けられており，アドレスバスの上位n本と，チップごとにユニークなnビットを比較して，一致した場合はそのチップを有効にする，みたいな感じでアドレス空間を分けている．このチップを有効にする信号を``CS(Chip Select)`` や ``CE(Chip Enable)`` と呼ぶ．このようにアドレスバスの一部を使ってチップを選択できることで，``メモリマップドIO``が実現されている．

## スタートアップ
* スタートアップとは，スタックポインタの設定してmain()へ飛ばすなど，プログラムの動作開始処理のこと．スタートアップを表す名前として， ``crt(C RunTime)`` ``locore`` とかが使われるらしい．
* 「割り込みハンドラを記述しておく特定のアドレス」のことを ``割り込みベクタ`` という．
* H8の場合は，割り込みベクタは 0x000000 - 0x0000ff に配置されている．
* H8は電源ON時にリセット割り込みが入り，ベクタテーブル先頭に配置されたリセット割り込みハンドラをコールする．そこにスタートアップのアドレスを登録しているので，電源投入時にスタートアップが動作するというわけ．

